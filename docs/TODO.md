# LangGraph Catalyst - 開発実行計画

## プロジェクト概要
LangGraphの学習支援とビジネス活用を促進するポートフォリオシステムの構築

---

## Phase 1: プロジェクト基盤構築 🏗️

### 1.1 プロジェクト構造のセットアップ
- [x] ディレクトリ構造の作成
  - [x] `src/` ディレクトリ作成
  - [x] `src/config/` ディレクトリ作成
  - [x] `src/features/` ディレクトリ作成
  - [x] `src/features/rag/` ディレクトリ作成
  - [x] `src/features/architect/` ディレクトリ作成
  - [x] `src/components/` ディレクトリ作成
  - [x] `src/utils/` ディレクトリ作成
  - [x] `data/chroma/` ディレクトリ作成
  - [x] `tests/` ディレクトリ作成
  - [x] `.streamlit/` ディレクトリ作成

### 1.2 基本ファイルの作成
- [x] `.gitignore` ファイル作成（Python、環境変数、DB等）
- [x] `.env.example` ファイル作成（環境変数テンプレート）
- [x] `requirements.txt` 作成（依存パッケージ定義）
- [x] `README.md` 作成（プロジェクト説明、セットアップ手順）
- [x] `render.yaml` 作成（デプロイ設定）

### 1.3 環境変数・設定管理
- [x] `src/config/__init__.py` 作成
- [x] `src/config/settings.py` 作成
  - [x] 環境変数読み込み（OpenAI API Key、Chroma設定等）
  - [x] Pydantic Settingsを使用した型安全な設定管理
  - [x] ログレベル設定

### 1.4 開発環境のセットアップ
- [x] Ruff設定ファイル作成（`pyproject.toml`または`ruff.toml`）
- [ ] Pre-commit hooks設定（オプション）
- [x] `.env` ファイル作成（gitignore済み）

**完了条件**: プロジェクト構造が整い、依存パッケージがインストール可能で、設定管理が機能する

---

## Phase 2: Streamlit基本UI構築 🎨

### 2.1 エントリーポイントの作成
- [x] `src/app.py` 作成
  - [x] Streamlitページ設定（タイトル、アイコン、レイアウト）
  - [x] セッション状態の初期化
  - [x] 基本的なページ構造（ヘッダー、メインエリア、フッター）

### 2.2 サイドバーコンポーネント
- [x] `src/components/__init__.py` 作成
- [x] `src/components/sidebar.py` 作成
  - [x] モード切り替え（RAG学習支援 / 構成案生成）
  - [x] 設定パネル（モデル選択、温度パラメータ等）
  - [x] 使い方説明セクション

### 2.3 スタイリング
- [x] `.streamlit/config.toml` 作成
  - [x] カラーテーマ設定（プライマリ、セカンダリカラー）
  - [x] フォント設定
- [x] カスタムCSS実装（`st.markdown`でインジェクション）
  - [x] カード風レイアウト
  - [x] ボタンスタイル
  - [x] チャットインターフェーススタイル

### 2.4 基本的なUIフロー確認
- [x] ローカルで起動確認（`streamlit run src/app.py`）
- [x] モード切り替えの動作確認
- [x] レスポンシブ表示の確認

**完了条件**: Streamlitアプリが起動し、基本的なUIレイアウトが表示される

---

## Phase 3: RAG学習支援機能の実装 📚

### 3.1 ユーティリティモジュール
- [x] `src/utils/__init__.py` 作成
- [x] `src/utils/helpers.py` 作成
  - [x] テキスト分割ユーティリティ
  - [x] ログ設定ヘルパー
  - [x] エラーハンドリング関数

### 3.2 ドキュメントクローラー
- [x] `src/features/rag/__init__.py` 作成
- [x] `src/features/rag/crawler.py` 作成
  - [x] LangGraph公式ドキュメントのクロール処理
  - [x] LangChain Blogのクロール処理
  - [x] GitHubリポジトリのクロール処理（README、examples等）
  - [x] HTMLパース、テキスト抽出処理
  - [x] メタデータ付与（ソースURL、更新日時等）
  - [x] CLIコマンド実装（`python -m src.features.rag.crawler --update`）

### 3.3 ベクトルストア構築
- [x] `src/features/rag/vectorstore.py` 作成
  - [x] Chromaクライアント初期化
  - [x] ドキュメント埋め込み（OpenAI Embeddings）
  - [x] ベクトルDB保存処理
  - [x] 類似度検索関数
  - [x] コレクション管理（作成、更新、削除）

### 3.4 RAGチェーン実装
- [x] `src/features/rag/chain.py` 作成
  - [x] プロンプトテンプレート作成
    - [x] システムプロンプト（役割定義）
    - [x] 回答フォーマット指示（ソース付き、コード例付き）
  - [x] RAG Chain構築（LangChain）
    - [x] Retriever設定
    - [x] LLM設定（OpenAI）
    - [x] チェーン組み立て
  - [x] ストリーミング対応（オプション）

### 3.5 RAG UI統合
- [x] `src/app.py` にRAGモードUI追加
  - [x] チャット入力フォーム
  - [x] 履歴表示（セッション管理）
  - [x] ソース表示カード
  - [x] コードブロックのシンタックスハイライト

### 3.6 初期データ投入
- [x] クローラー実行でドキュメント収集
- [x] ベクトルDB構築確認
- [x] サンプルクエリでのテスト

**完了条件**: RAG機能が動作し、LangGraphに関する質問に対してソース付きで回答できる

---

## Phase 4: 構成案生成機能の実装 🏛️

### 4.1 プロンプト設計
- [x] `src/features/architect/__init__.py` 作成
- [x] `src/features/architect/prompts.py` 作成
  - [x] ビジネス課題分析用プロンプト
  - [x] LangGraph構成案生成プロンプト
  - [x] Mermaid図生成プロンプト
  - [x] コード例生成プロンプト
  - [x] わかりやすい説明生成プロンプト

### 4.2 LangGraphワークフロー設計
- [x] `src/features/architect/graph.py` 作成
  - [x] ノード定義
    - [x] 課題分析ノード
    - [x] 構成案生成ノード
    - [x] 図生成ノード
    - [x] コード生成ノード
    - [x] 説明生成ノード
  - [x] エッジ定義（ノード間の遷移）
  - [x] 状態管理（StateGraph）
  - [x] グラフコンパイル
  - [x] 実行関数

### 4.3 Mermaid図生成
- [x] `src/features/architect/visualizer.py` 作成
  - [x] Mermaid記法生成関数
  - [x] フローチャート生成
  - [x] グラフ構造の可視化
  - [x] バリデーション処理

### 4.4 構成案生成UI統合
- [x] `src/app.py` に構成案生成モードUI追加
  - [x] ビジネス課題入力フォーム
  - [x] 生成ボタン
  - [x] 結果表示エリア
    - [x] Mermaid図表示（`st.mermaid`またはMarkdown）
    - [x] コード例表示（シンタックスハイライト）
    - [x] 説明表示（カード形式）
  - [x] ダウンロードボタン（結果をMarkdownで出力）

### 4.5 サンプル課題でのテスト
- [x] 「カスタマーサポートの自動化」での生成確認（ユニットテスト済み）
- [x] 「データ分析ワークフロー」での生成確認（UIに実装済み）
- [x] 出力品質の調整（プロンプトチューニング済み）

**完了条件**: ビジネス課題を入力すると、Mermaid図+コード+説明が生成される ✅

---

## Phase 5: テスト・品質向上 🧪

### 5.1 ユニットテスト作成
- [x] `tests/__init__.py` 作成
- [x] `tests/test_core.py` 作成
  - [x] RAGチェーンのテスト（モックLLM使用）
  - [x] ベクトルストアのテスト
  - [x] 構成案生成ワークフローのテスト
  - [x] プロンプト生成のテスト

### 5.2 統合テスト
- [x] エンドツーエンドテスト
  - [x] RAGモードでの質問→回答フロー
  - [x] 構成案生成モードでの入力→出力フロー

### 5.3 エラーハンドリング
- [x] API制限エラーのハンドリング
- [x] ベクトルDB接続エラーのハンドリング
- [x] 入力バリデーション
- [x] ユーザーフレンドリーなエラーメッセージ表示

### 5.4 パフォーマンス最適化
- [x] キャッシング実装（`@st.cache_data`、`@st.cache_resource`）
- [x] レスポンス時間の計測
- [x] ストリーミング最適化

**完了条件**: 主要機能のテストが通り、エラーハンドリングが実装されている ✅

---

## Phase 6: UI/UX改善 ✨

### 6.1 視覚的改善
- [x] ローディングアニメーション追加
- [x] プログレスバー表示
- [x] アイコン・絵文字の適切な配置
- [x] カラースキームの統一

### 6.2 ユーザビリティ向上
- [x] サンプル質問ボタン（RAGモード）
- [x] サンプル課題ボタン（構成案生成モード）
- [x] ヘルプセクション・ツールチップ
- [ ] キーボードショートカット（オプション）

### 6.3 レスポンシブ対応
- [x] モバイル表示の確認・調整
- [x] タブレット表示の確認・調整
- [x] 各種画面サイズでのテスト

### 6.4 アクセシビリティ
- [x] スクリーンリーダー対応
- [x] キーボードナビゲーション
- [x] コントラスト比の確認

**完了条件**: UIが洗練され、ユーザーが直感的に操作できる ✅

---

## Phase 7: デプロイ・公開 🚀

### 7.1 Render設定
- [ ] `render.yaml` の最終調整
  - [ ] ビルドコマンド確認
  - [ ] スタートコマンド確認
  - [ ] 環境変数設定
- [ ] Renderアカウント作成・ログイン
- [ ] GitHubリポジトリ連携

### 7.2 環境変数設定
- [ ] Render管理画面でのシークレット登録
  - [ ] `OPENAI_API_KEY`
  - [ ] その他必要な環境変数

### 7.3 デプロイ実行
- [ ] 初回デプロイ
- [ ] ビルドログ確認
- [ ] デプロイ成功確認

### 7.4 本番環境テスト
- [ ] 全機能の動作確認
  - [ ] RAGモードテスト
  - [ ] 構成案生成モードテスト
- [ ] パフォーマンス確認
- [ ] エラーログ確認

### 7.5 ドキュメント整備
- [ ] README.mdの最終更新
  - [ ] デモURL追加
  - [ ] スクリーンショット追加
  - [ ] セットアップ手順の最終確認
- [ ] ポートフォリオサイトへのリンク追加
- [ ] 技術ブログ記事作成（オプション）

**完了条件**: アプリケーションが本番環境で安定稼働し、公開URL経由でアクセス可能

---

## Phase 8: ポストリリース改善 🔄

### 8.1 モニタリング・ロギング
- [ ] アクセスログ分析
- [ ] エラーログ監視
- [ ] パフォーマンスメトリクス収集

### 8.2 フィードバック対応
- [ ] ユーザーフィードバック収集機能（オプション）
- [ ] バグ修正
- [ ] 機能改善

### 8.3 追加機能検討
- [ ] RAGデータの自動更新機能
- [ ] 生成結果の保存・共有機能
- [ ] マルチモーダル対応（画像入力等）
- [ ] 他LLMプロバイダー対応（Claude、Gemini等）

**完了条件**: 継続的な改善サイクルが確立されている

---

## 開発チェックリスト

### 開発中の品質チェック
- [ ] コードレビュー（自己レビュー）
- [ ] コミットメッセージの規約遵守
- [ ] `ruff format .` 実行
- [ ] `ruff check .` 実行
- [ ] `pytest tests/ -v` 実行
- [ ] セキュリティチェック（API Keyのハードコーディング等）

### デプロイ前チェックリスト
- [ ] 全テスト通過
- [ ] `.env` ファイルが`.gitignore`に含まれている
- [ ] `requirements.txt` が最新
- [ ] ドキュメント（README、CLAUDE.md）が最新
- [ ] ローカルで問題なく動作
- [ ] 不要なコメント・デバッグコードの削除

---

## 推奨開発順序

1. **Phase 1 → Phase 2**: 基盤とUIを先に固める
2. **Phase 3**: RAG機能を完成させる（単独で価値がある）
3. **Phase 4**: 構成案生成機能を追加（差別化要素）
4. **Phase 5**: テスト・品質を担保
5. **Phase 6**: UI/UXを洗練
6. **Phase 7**: デプロイして公開
7. **Phase 8**: フィードバックを受けて改善

---

## 見積もり工数（参考）

| Phase | 概算工数 | 備考 |
|-------|---------|------|
| Phase 1 | 2-3時間 | 構造整備は比較的簡単 |
| Phase 2 | 3-4時間 | Streamlit基本UIは迅速に構築可能 |
| Phase 3 | 8-10時間 | クローラー+RAG実装がコア |
| Phase 4 | 8-10時間 | LangGraphワークフロー設計が重要 |
| Phase 5 | 4-6時間 | テストとエラーハンドリング |
| Phase 6 | 4-6時間 | UI/UX改善 |
| Phase 7 | 2-3時間 | デプロイ・公開 |
| Phase 8 | 継続的 | 運用・改善 |

**合計**: 約30-40時間（実装のみ、学習時間除く）

---

## 成功指標

### 技術的指標
- [ ] RAG回答の精度: ソース付き回答が正確
- [ ] 構成案の品質: 実用的なMermaid図+コード
- [ ] レスポンスタイム: 10秒以内（RAG）、30秒以内（構成案生成）
- [ ] テストカバレッジ: 主要機能80%以上

### ビジネス指標
- [ ] ポートフォリオとして説明可能
- [ ] デモ可能な状態で公開
- [ ] 設計思想が明確に説明できる
- [ ] 他プロジェクトへの応用可能性

---

## リスクと対策

| リスク | 影響 | 対策 |
|-------|------|------|
| API制限超過 | サービス停止 | エラーハンドリング、レート制限実装 |
| クロール失敗 | RAGデータ不足 | 定期的な手動チェック、フォールバック |
| LLM出力品質 | ユーザー体験低下 | プロンプトチューニング、複数回生成 |
| デプロイエラー | 公開遅延 | ローカル環境で十分テスト |
| コスト超過 | 開発中断 | モデル選択の最適化、キャッシング活用 |

---

## 次のステップ

1. **Phase 1の開始**: まずはプロジェクト構造とrequirements.txtの作成から
2. **並行作業可能**: UI実装とRAGデータ収集は並行可能
3. **段階的デプロイ**: Phase 3完了時点で一度デプロイして動作確認

---

このドキュメントは開発の進捗に合わせて随時更新してください。
各チェックボックスを完了時にチェック `[x]` にすることで進捗を可視化できます。
